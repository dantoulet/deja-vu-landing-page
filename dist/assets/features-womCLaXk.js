import{j as t,B as e}from"./vendor-ui-u8Axy7qB.js";import{r as s}from"./vendor-core-4HP1EGEp.js";import{u as a,t as o}from"./utils-CjSK8VtQ.js";let n=0;const r=new Map,i=t=>{if(r.has(t))return;const e=setTimeout((()=>{r.delete(t),u({type:"REMOVE_TOAST",toastId:t})}),1e6);r.set(t,e)},c=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map((t=>t.id===e.toast.id?{...t,...e.toast}:t))};case"DISMISS_TOAST":{const{toastId:s}=e;return s?i(s):t.toasts.forEach((t=>{i(t.id)})),{...t,toasts:t.toasts.map((t=>t.id===s||void 0===s?{...t,open:!1}:t))}}case"REMOVE_TOAST":return void 0===e.toastId?{...t,toasts:[]}:{...t,toasts:t.toasts.filter((t=>t.id!==e.toastId))}}},l=[];let d={toasts:[]};function u(t){d=c(d,t),l.forEach((t=>{t(d)}))}function m({...t}){const e=(n=(n+1)%Number.MAX_SAFE_INTEGER,n.toString()),s=()=>u({type:"DISMISS_TOAST",toastId:e});return u({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:t=>{t||s()}}}),{id:e,dismiss:s,update:t=>u({type:"UPDATE_TOAST",toast:{...t,id:e}})}}function p(){const[t,e]=s.useState(d);return s.useEffect((()=>(l.push(e),()=>{const t=l.indexOf(e);t>-1&&l.splice(t,1)})),[t]),{...t,toast:m,dismiss:t=>u({type:"DISMISS_TOAST",toastId:t})}}const f=s.createContext(void 0);function h({children:e}){const[a,o]=s.useState((()=>"true"===localStorage.getItem("cookieConsent")));return s.useEffect((()=>{localStorage.setItem("cookieConsent",a.toString())}),[a]),t.jsx(f.Provider,{value:{consent:a,setConsent:o},children:e})}function x(){const t=s.useContext(f);if(void 0===t)throw new Error("useCookieConsent must be used within a CookieConsentProvider");return t}function g(){const{consent:a,setConsent:o}=x(),[n,r]=s.useState(!1);return s.useEffect((()=>{if(!a){const t=setTimeout((()=>r(!0)),1e3);return()=>clearTimeout(t)}}),[a]),!n||a?null:t.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-black/5 backdrop-blur-sm dark:bg-white/5",children:t.jsxs("div",{className:"container mx-auto flex items-center justify-between px-4",children:[t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["This site uses essential cookies for basic functionality."," ",t.jsx("a",{href:"/cookie-policy",className:"underline text-primary hover:text-primary/90",children:"Details"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(e,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>{o(!0),r(!1)},children:"Got It"}),t.jsx(e,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>{o(!1),r(!1)},children:"Refuse"})]})]})})}const b=s.createContext(void 0),S=({children:e})=>{const{consent:n}=x(),[r,i]=s.useState((()=>{const t=new URLSearchParams(window.location.search).get("lang"),e=localStorage.getItem("language"),s=navigator.language.split("-")[0];let a="en";return"fr"===t||"en"===t?a=t:"fr"===e||"en"===e?a=e:"fr"===s&&(a="fr"),a}));s.useEffect((()=>{a(r),n&&localStorage.setItem("language",r)}),[r]);const c={language:r,setLanguage:i,t:(t,e)=>{const s=e.split(".");let a=o[r][t];for(const o of s)a=a[o];return a}};return t.jsx(b.Provider,{value:c,children:e})},y=()=>{const t=s.useContext(b);if(void 0===t)throw new Error("useLanguage must be used within a LanguageProvider");return t},v=({hideTitle:e=!1,onClose:a})=>{const{t:o}=y(),[n,r]=s.useState(!1),i=o("author","newsletter");return t.jsxs("div",{className:"w-full max-w-lg mx-auto animate-fadeIn",children:[!e&&t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-2xl font-tiltwarp text-primary uppercase text-left",children:i.title})}),t.jsx("p",{className:"text-black/80 font-times text-left mb-2 sm:mb-1",children:i.description}),t.jsxs("form",{onSubmit:async t=>{t.preventDefault(),r(!0);const e=t.currentTarget,s=new FormData(e);try{await fetch("https://admin.audrianacristello.com/subscription/form",{method:"POST",body:s,mode:"no-cors"}),m({title:i.toast.title,description:i.toast.description,duration:3e3}),localStorage.setItem("newsletter-subscribed","true"),e.reset(),a?.()}catch(o){m({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive",duration:3e3})}finally{r(!1)}},className:"listmonk-form",children:[t.jsx("input",{type:"hidden",name:"nonce"}),t.jsx("input",{type:"hidden",name:"l",value:"6a71a4b9-70a7-46da-8a3f-a8224cb80808"}),t.jsx("input",{type:"email",name:"email",placeholder:i.placeholder,className:"bg-white/10 border-primary/20 font-times text-black placeholder:text-black/60 w-full px-3 py-2 border rounded-md mb-3",required:!0}),t.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary text-white hover:bg-primary/90 font-tiltwarp uppercase px-4 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:i.button})]})]})};export{h as C,S as L,v as N,y as a,x as b,g as c,p as u};
